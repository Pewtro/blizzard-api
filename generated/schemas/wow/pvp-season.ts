// Generated by ts-to-zod
import { z } from 'zod';
import {
  factionSchema,
  factionsSchema,
  keyBaseSchema,
  nameIdKeySchema,
  nameIdSchema,
  responseBaseSchema,
} from '../core';

const seasonSchema = keyBaseSchema.extend({
  id: z.number(),
});

const bracketSchema = z.strictObject({
  id: z.number(),
  type: z.union([z.literal('ARENA_3v3'), z.literal('BATTLEGROUNDS'), z.literal('SHUFFLE')]),
});

const rewardSchema = z.strictObject({
  achievement: nameIdKeySchema,
  bracket: bracketSchema,
  faction: factionSchema.optional(),
  rating_cutoff: z.number(),
  specialization: nameIdKeySchema.optional(),
});

export const pvpSeasonIndexResponseSchema = responseBaseSchema.extend({
  current_season: seasonSchema,
  seasons: z.array(seasonSchema),
});

export const pvpSeasonResponseSchema = responseBaseSchema.extend({
  id: z.number(),
  leaderboards: z.strictObject({
    href: z.string(),
  }),
  rewards: z.strictObject({
    href: z.string(),
  }),
  season_name: z.string().optional(),
  season_start_timestamp: z.number(),
});

const realmSchema = keyBaseSchema.extend({
  id: z.number(),
  slug: z.string(),
});

const characterSchema = nameIdSchema.extend({
  realm: realmSchema,
});

const seasonMatchStatisticsSchema = z.strictObject({
  lost: z.number(),
  played: z.number(),
  won: z.number(),
});

export const pvpLeaderboardIndexResponseSchema = responseBaseSchema.extend({
  leaderboards: z.array(
    keyBaseSchema.and(
      z.strictObject({
        id: z.number().optional(),
        name: z.string(),
      }),
    ),
  ),
  season: seasonSchema,
});

const entrySchema = z.strictObject({
  character: characterSchema,
  faction: z.strictObject({
    type: factionsSchema,
  }),
  rank: z.number(),
  rating: z.number(),
  season_match_statistics: seasonMatchStatisticsSchema,
  tier: seasonSchema,
});

export const pvpRewardsIndexResponseSchema = responseBaseSchema.extend({
  rewards: z.array(rewardSchema),
  season: seasonSchema,
});

export const pvpLeaderboardResponseSchema = responseBaseSchema.extend({
  bracket: bracketSchema,
  entries: z.array(entrySchema),
  name: z.string(),
  season: seasonSchema,
});
