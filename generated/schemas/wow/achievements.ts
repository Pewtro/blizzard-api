// Generated by ts-to-zod
import { z } from 'zod';
import {
  factionSchema,
  keyBaseSchema,
  mediaAssetSchema,
  nameIdKeySchema,
  nameIdSchema,
  responseBaseSchema,
} from '../core';

export const achievementCategoryIndexResponseSchema = responseBaseSchema.extend({
  categories: z.array(nameIdKeySchema),
  guild_categories: z.array(nameIdKeySchema),
  root_categories: z.array(nameIdKeySchema),
});

export const achievementCategoryResponseSchema = nameIdSchema.extend(responseBaseSchema.shape).extend({
  achievements: z.array(nameIdKeySchema),
  aggregates_by_faction: z.strictObject({
    alliance: z.strictObject({
      points: z.number(),
      quantity: z.number(),
    }),
    horde: z.strictObject({
      points: z.number(),
      quantity: z.number(),
    }),
  }),
  display_order: z.number(),
  is_guild_category: z.boolean(),
  parent_category: nameIdKeySchema.optional(),
  subcategories: z.array(nameIdKeySchema).optional(),
});

export const achievementIndexResponseSchema = responseBaseSchema.extend({
  achievements: z.array(nameIdKeySchema),
});

export const achievementMediaResponseSchema = responseBaseSchema.extend({
  assets: z.array(mediaAssetSchema),
  id: z.number(),
});

const operatorSchema = z.strictObject({
  name: z.string(),
  type: z.union([z.literal('AND'), z.literal('COMPLETE_AT_LEAST')]),
});

const childCriteria3Schema = z.strictObject({
  achievement: nameIdKeySchema.optional(),
  amount: z.number(),
  description: z.string().nullable(),
  faction: factionSchema.optional(),
  id: z.number(),
  is_gold: z.boolean().optional(),
  operator: operatorSchema.optional(),
  show_progress_bar: z.boolean().optional(),
});

const childCriteria2Schema = z.strictObject({
  achievement: nameIdKeySchema.optional(),
  amount: z.number(),
  child_criteria: z.array(childCriteria3Schema).optional(),
  description: z.string().nullable(),
  faction: factionSchema.optional(),
  id: z.number(),
  is_gold: z.boolean().optional(),
  operator: operatorSchema.optional(),
  show_progress_bar: z.boolean().optional(),
});

const childCriteriaSchema = z.strictObject({
  achievement: nameIdKeySchema.optional(),
  amount: z.number(),
  child_criteria: z.array(childCriteria2Schema).optional(),
  description: z.string().nullable(),
  faction: factionSchema.optional(),
  id: z.number(),
  is_gold: z.boolean().optional(),
  operator: operatorSchema.optional(),
  show_progress_bar: z.boolean().optional(),
});

const criteriaSchema = z.strictObject({
  amount: z.number(),
  child_criteria: z.array(childCriteriaSchema).optional(),
  description: z.string().nullable(),
  faction: factionSchema.optional(),
  id: z.number(),
  operator: operatorSchema.optional(),
  show_progress_bar: z.boolean().optional(),
});

export const achievementResponseSchema = nameIdSchema.extend(responseBaseSchema.shape).extend({
  category: nameIdKeySchema,
  criteria: criteriaSchema.optional(),
  description: z.string(),
  display_order: z.number(),
  guild_reward_items: z.array(nameIdKeySchema).optional(),
  is_account_wide: z.boolean(),
  media: keyBaseSchema.and(
    z.strictObject({
      id: z.number(),
    }),
  ),
  next_achievement: nameIdKeySchema.optional(),
  points: z.number(),
  prerequisite_achievement: nameIdKeySchema.optional(),
  requirements: z
    .strictObject({
      faction: factionSchema,
    })
    .optional(),
  reward_description: z.string().optional(),
  reward_item: nameIdKeySchema.optional(),
});
