// Generated by ts-to-zod
import { z } from 'zod';
import { characterSchema, keyBaseSchema, nameIdKeySchema, responseBaseSchema } from '../core';

const spellTooltipSchema = z.strictObject({
  cast_time: z
    .union([
      z.literal('1.5 sec cast'),
      z.literal('2.5 sec cast'),
      z.literal('3 sec cast'),
      z.literal('Channeled'),
      z.literal('Instant'),
      z.literal('Passive'),
    ])
    .optional(),
  cooldown: z.string().optional(),
  description: z.string().optional(),
  power_cost: z.string().optional(),
  range: z
    .union([
      z.literal('8-30 yd range'),
      z.literal('15 yd range'),
      z.literal('30 yd range'),
      z.literal('40 yd range'),
      z.literal('50 yd range'),
      z.literal('55 yd range'),
      z.literal('100 yd range'),
      z.literal('Melee Range'),
    ])
    .optional(),
  spell: keyBaseSchema.and(
    z.strictObject({
      id: z.number(),
      name: z.string().optional(),
    }),
  ),
});

const selectedSchema = z.strictObject({
  spell_tooltip: spellTooltipSchema,
  talent: keyBaseSchema.and(
    z.strictObject({
      id: z.number(),
      name: z.string().optional(),
    }),
  ),
});

const pvpTalentSlotSchema = z.strictObject({
  selected: selectedSchema,
  slot_number: z.number(),
});

const selectedTalentSchema = z.strictObject({
  default_points: z.number().optional(),
  id: z.number(),
  rank: z.number(),
  tooltip: selectedSchema.optional(),
});

const loadoutSchema = z.strictObject({
  is_active: z.boolean(),
  selected_class_talent_tree: keyBaseSchema.and(
    z.strictObject({
      name: z.string(),
    }),
  ),
  selected_class_talents: z.array(selectedTalentSchema),
  selected_hero_talent_tree: nameIdKeySchema,
  selected_hero_talents: z.array(selectedTalentSchema),
  selected_spec_talent_tree: keyBaseSchema.and(
    z.strictObject({
      name: z.string(),
    }),
  ),
  selected_spec_talents: z.array(selectedTalentSchema).optional(),
  talent_loadout_code: z.string(),
});

const specializationSchema = z.strictObject({
  glyphs: z.array(nameIdKeySchema).optional(),
  loadouts: z.array(loadoutSchema),
  pvp_talent_slots: z.array(pvpTalentSlotSchema).optional(),
  specialization: nameIdKeySchema,
});

export const characterSpecializationsSummaryResponseSchema = responseBaseSchema.extend({
  active_hero_talent_tree: nameIdKeySchema,
  active_specialization: nameIdKeySchema,
  character: characterSchema,
  specializations: z.array(specializationSchema),
});
