// Generated by ts-to-zod
import { z } from 'zod';
import {
  characterSchema,
  factionSchema,
  keyBaseSchema,
  nameIdKeySchema,
  realmSchema,
  responseBaseSchema,
} from '../core';

const guildSchema = nameIdKeySchema.extend({
  faction: factionSchema,
  realm: realmSchema,
});

const characterAchievementSchema = z.object({
  achievement: nameIdKeySchema,
  character: characterSchema,
});

const playableSchema = keyBaseSchema.extend({
  id: z.number(),
});

const rosterMemberCharacterSchema = characterSchema.extend({
  level: z.number(),
  playable_class: playableSchema,
  playable_race: playableSchema,
});

const guildRetailResponseSchema = z.any();

export const guildAchievementsClassicEraResponseSchema = responseBaseSchema.extend({
  guild: guildSchema,
});

const activityElementSchema = z.object({
  activity: z.object({
    type: z.string(),
  }),
  character_achievement: characterAchievementSchema,
  timestamp: z.number(),
});

export const guildResponseSchema = guildRetailResponseSchema.omit({ crest: true }).and(
  z.object({
    crest: guildRetailResponseSchema.shape.crest.optional(),
  }),
);

const memberSchema = z.object({
  character: rosterMemberCharacterSchema,
  rank: z.number(),
});

export const guildActivityResponseSchema = responseBaseSchema.extend({
  activities: z.array(activityElementSchema).optional(),
  guild: guildSchema,
});

export const guildRosterResponseSchema = responseBaseSchema.extend({
  guild: guildSchema,
  members: z.array(memberSchema),
});
